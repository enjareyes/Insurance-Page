<mat-expansion-panel hideToggle='true'>

    <!-- Collapsed Header -->
    <mat-expansion-panel-header  id='expansion-header-{{panelId}}' [collapsedHeight]="'175px'" [expandedHeight]="'175px'">
        <div class="mat-content row">
        
            <div class="col-md-2" style='float: left;'>
                <div id='logo-{{panelId}}' class='logo'></div>
            </div>

            <mat-panel-title class='col-md-10' style='margin-right:0px; padding-left: 0px;'>
                <div class='row'>
                    <div class='col-md-6 left-container'>
                        <h4 id='name-{{panelId}}'>{{data.name}}</h4>
                        <div *ngIf='data.tagline' id='tagline-{{panelId}}' class='gray'>{{data.tagline}}</div>

                        <div class="row">
                            <span style='width: 15px;'></span>

                            <div class='stars' *ngFor="let star of getStars(data.stars); let i = index">
                                <svg class='star' width="15.6" height="14.99" viewBox="0 0 15.6 14.99">
                                    <path d="M7.8,0,9.95,5.31l5.66.42-4.33,3.7L12.62,15,7.8,12,3,15,4.33,9.42,0,5.73l5.66-.42Z" fill="#fec43e" />
                                </svg>                                 
                            </div>
                            
                            <app-feature-logo *ngIf='data.features && data.features.length' [featureData]='data.features'></app-feature-logo>                            
                        </div>
                    </div>

                    <div class='col-md-6 right-container'>
                        <div id='price-{{panelId}}' class='price' [hidden]='!data.rate'>
                            <span *ngIf='data.type === 3' class='verified'>Verified Price</span> <span class='dollar'>$</span>{{getRate(data.rate)}}
                        <span class='mo gray'>/mo</span></div>

                        <!-- Upgrade: these buttons could be extracted into components as well -->
                        <button id='buy-btn-{{panelId}}' (click)='goTo(data.action.link)' *ngIf='data.type === 3' type="button" class="btn yellow-btn btn-lg">
                            <svg width="20" height="20" viewBox="0 0 23.65 32.82">
                                <path d="M7.1,32.82,10.64,21.1H0L16.55,0,13,11.72H23.65Z" fill="#fff" />
                            </svg>    
                            Buy Now
                        </button>

                        <button id='quote-btn-{{panelId}}'  (click)='goTo(data.action.link)' *ngIf='data.type < 2' type="button" class="btn blue-btn btn-lg">
                            <svg width="11px" height="14px" viewBox="0 0 11 14">
                                <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
                                    <g transform="translate(6.000000, 7.000000) rotate(-90.000000) translate(-6.000000, -7.000000) translate(-1.000000, 1.000000)" fill="#fff">
                                    <path d="M6.08,0.61 C6.06926826,0.757523774 6.00529945,0.896122863 5.9,1 L2.07,4.89 L13.37,4.89 C13.7068937,4.89 13.98,5.1631063 13.98,5.5 C13.98,5.8368937 13.7068937,6.11 13.37,6.11 L2.07,6.11 L5.9,10 C6.04748502,10.1764639 6.08318589,10.4208783 5.99233695,10.6321549 C5.90148801,10.8434315 5.69953328,10.985654 5.47,11 C5.29452425,11.0117825 5.12271449,10.945983 5,10.82 L0.18,5.93 C-0.0564451293,5.69208883 -0.0564451293,5.30791117 0.18,5.07 L0.18,5.07 L5,0.18 C5.17646389,0.0325149829 5.42087828,-0.00318588572 5.63215489,0.0876630545 C5.84343149,0.178511995 5.98565398,0.380466722 6,0.61 L6.08,0.61 Z" />
                                    </g>
                                </g>
                            </svg>                                       
                            Get Quote
                        </button>
                    </div>
                </div>
            
            </mat-panel-title>
        </div>
    </mat-expansion-panel-header>
    
    <!-- Expandable Body -->
    <div *ngIf='data.features_html || data.detail_body' class='row' id='expansion-body-{{panelId}}'>
        <div id='features-{{panelId}}' *ngIf='data.features_html' class='col-md-6 gray'>
            <div class='bottom-header-border'>
                <span class="material-icons">list</span>
                <span class='title'>Features</span>
            </div>
            <div id='feature-content-{{panelId}}'></div>
        </div>

        <!-- If we wanted this to remain on the right when there are no features
            I would move the *ngIf='data.features_html'
            to within the #features-{{panelId}} to hold that area empty -->
        <div *ngIf='data.detail_body' class='col-md-6 gray'>
            <div class='bottom-header-border'>
                <span class="material-icons">menu_book</span>
                <span class='title'>Why {{data.name}}?</span>
            </div>
            
            <div id='detail-body-{{panelId}}' class='feature-detail' style='margin-left: 15px'>{{data.detail_body}}</div>
        </div>
    </div>
</mat-expansion-panel>
